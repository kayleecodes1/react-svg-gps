import{R as i,r}from"./index-CDs2tPxN.js";var d=Object.defineProperty,h=(t,e,n)=>e in t?d(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,u=(t,e,n)=>h(t,typeof e!="symbol"?e+"":e,n);class p{constructor(){u(this,"points",new Map),u(this,"subscriptions",new Map)}registerBeacon(e){if(this.points.has(e)){console.warn("BeaconStore: Attempt to register duplicate beacon ID `%s`",e);return}this.points.set(e,null)}unregisterBeacon(e){if(!this.points.has(e)){console.warn("BeaconStore: Attempt to unregister unregistered beacon ID `%s`",e);return}this.points.delete(e)}reportBeaconPoint(e,n){if(!this.points.has(e)){console.warn("BeaconStore: Attempt to report unregistered beacon ID `%s`",e);return}this.points.set(e,n);const s=this.subscriptions.get(e);s&&s.forEach(o=>{o(n)})}subscribe(e,n){let s=this.subscriptions.get(e);s||this.subscriptions.set(e,s=new Set),s.add(n),this.points.has(e)&&this.points.get(e)&&n(this.points.get(e))}unsubscribe(e,n){const s=this.subscriptions.get(e);s&&(s.delete(n),s.size===0&&this.subscriptions.delete(e))}}const a=i.createContext(new p),l=({children:t})=>{const e=r.useMemo(()=>new p,[]);return i.createElement(a.Provider,{value:e},t)},b={a:1,b:0,c:0,d:1,e:0,f:0},f=(t,e)=>({x:e.a*t.x+e.c*t.y+e.e,y:e.b*t.x+e.d*t.y+e.f}),g=(t,e,n)=>{const s=t.getBBox(),o={x:s.x+s.width*e.x+n.x,y:s.y+s.height*e.y+n.y},c=t.getCTM()||b;return f(o,c)},m=({id:t,anchor:e={x:.5,y:.5},offset:n={x:0,y:0}})=>{const s=r.useContext(a),o=r.useRef(null);return r.useLayoutEffect(()=>(s.registerBeacon(t),()=>{s.unregisterBeacon(t)}),[]),r.useLayoutEffect(()=>{if(!o.current){s.reportBeaconPoint(t,null);return}const c=g(o.current,e,n);s.reportBeaconPoint(t,c)}),o},w=({id:t})=>{const e=r.useContext(a),[n,s]=r.useState(null);return r.useLayoutEffect(()=>(e.subscribe(t,s),()=>{e.unsubscribe(t,s)}),[]),n};l.__docgenInfo={description:"",methods:[],displayName:"I"};const y=({children:t,...e})=>i.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"}},i.createElement("svg",{width:"400",height:"400",style:{border:"1px solid #EFEFEF"},...e},i.createElement(l,null,t)));y.__docgenInfo={description:"",methods:[],displayName:"Container",props:{children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};export{y as C,m as M,w as T};
