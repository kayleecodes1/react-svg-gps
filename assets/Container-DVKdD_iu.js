var b=Object.defineProperty;var h=(t,e,n)=>e in t?b(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var i=(t,e,n)=>h(t,typeof e!="symbol"?e+"":e,n);import{R as c,r as o}from"./index-CDs2tPxN.js";class l{constructor(){i(this,"points",new Map);i(this,"subscriptions",new Map)}registerBeacon(e){if(this.points.has(e)){console.warn("BeaconStore: Attempt to register duplicate beacon ID `%s`",e);return}this.points.set(e,null)}unregisterBeacon(e){if(!this.points.has(e)){console.warn("BeaconStore: Attempt to unregister unregistered beacon ID `%s`",e);return}this.points.delete(e)}reportBeaconPoint(e,n){if(!this.points.has(e)){console.warn("BeaconStore: Attempt to report unregistered beacon ID `%s`",e);return}this.points.set(e,n);const s=this.subscriptions.get(e);s&&s.forEach(r=>{r(n)})}subscribe(e,n){let s=this.subscriptions.get(e);s||this.subscriptions.set(e,s=new Set),s.add(n),this.points.has(e)&&this.points.get(e)&&n(this.points.get(e))}unsubscribe(e,n){const s=this.subscriptions.get(e);s&&(s.delete(n),s.size===0&&this.subscriptions.delete(e))}}const u=c.createContext(new l),p=({children:t})=>{const e=o.useMemo(()=>new l,[]);return c.createElement(u.Provider,{value:e},t)};p.__docgenInfo={description:"",methods:[],displayName:"BeaconProvider",props:{children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};const f={a:1,b:0,c:0,d:1,e:0,f:0},g=(t,e)=>({x:e.a*t.x+e.c*t.y+e.e,y:e.b*t.x+e.d*t.y+e.f}),d=(t,e,n)=>{const s=t.getBBox(),r={x:s.x+s.width*e.x+n.x,y:s.y+s.height*e.y+n.y},a=t.getCTM()||f;return g(r,a)},m=({id:t,anchor:e={x:.5,y:.5},offset:n={x:0,y:0}})=>{const s=o.useContext(u),r=o.useRef(null);return o.useLayoutEffect(()=>(s.registerBeacon(t),()=>{s.unregisterBeacon(t)}),[]),o.useLayoutEffect(()=>{if(!r.current){s.reportBeaconPoint(t,null);return}const a=d(r.current,e,n);s.reportBeaconPoint(t,a)}),r},E=({id:t})=>{const e=o.useContext(u),[n,s]=o.useState(null);return o.useLayoutEffect(()=>(e.subscribe(t,s),()=>{e.unsubscribe(t,s)}),[]),n},y=({children:t,...e})=>c.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"}},c.createElement("svg",{width:"400",height:"400",style:{border:"1px solid #EFEFEF"},...e},c.createElement(p,null,t)));y.__docgenInfo={description:"",methods:[],displayName:"Container",props:{children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};export{y as C,m as a,E as u};
