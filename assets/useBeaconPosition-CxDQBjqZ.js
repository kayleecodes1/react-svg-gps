var h=Object.defineProperty;var f=(t,e,o)=>e in t?h(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o;var i=(t,e,o)=>f(t,typeof e!="symbol"?e+"":e,o);import{R as c,r as n}from"./index-CDs2tPxN.js";class p{constructor(){i(this,"points",new Map);i(this,"subscriptions",new Map)}registerBeacon(e){if(this.points.has(e)){console.warn("BeaconStore: Attempt to register duplicate beacon ID `%s`",e);return}this.points.set(e,null)}unregisterBeacon(e){if(!this.points.has(e)){console.warn("BeaconStore: Attempt to unregister unregistered beacon ID `%s`",e);return}this.points.delete(e)}reportBeaconPoint(e,o){if(!this.points.has(e)){console.warn("BeaconStore: Attempt to report unregistered beacon ID `%s`",e);return}this.points.set(e,o);const s=this.subscriptions.get(e);s&&s.forEach(r=>{r(o)})}subscribe(e,o){let s=this.subscriptions.get(e);s||this.subscriptions.set(e,s=new Set),s.add(o),this.points.has(e)&&this.points.get(e)&&o(this.points.get(e))}unsubscribe(e,o){const s=this.subscriptions.get(e);s&&(s.delete(o),s.size===0&&this.subscriptions.delete(e))}}const u=c.createContext(new p),l=({children:t})=>{const e=n.useMemo(()=>new p,[]);return c.createElement(u.Provider,{value:e},t)};l.__docgenInfo={description:"",methods:[],displayName:"BeaconProvider",props:{children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};l.__docgenInfo={description:"",methods:[],displayName:"BeaconProvider",props:{children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};const d=({children:t,...e})=>c.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"}},c.createElement("svg",{width:"400",height:"400",style:{border:"1px solid #EFEFEF"},...e},c.createElement(l,null,t)));d.__docgenInfo={description:"",methods:[],displayName:"Container",props:{children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};d.__docgenInfo={description:"",methods:[],displayName:"Container",props:{children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};const b={a:1,b:0,c:0,d:1,e:0,f:0},g=(t,e)=>({x:e.a*t.x+e.c*t.y+e.e,y:e.b*t.x+e.d*t.y+e.f}),y=(t,e,o)=>{const s=t.getBBox(),r={x:s.x+s.width*e.x+o.x,y:s.y+s.height*e.y+o.y},a=t.getCTM()||b;return g(r,a)},m=({id:t,anchor:e={x:.5,y:.5},offset:o={x:0,y:0}})=>{const s=n.useContext(u),r=n.useRef(null);return n.useLayoutEffect(()=>(s.registerBeacon(t),()=>{s.unregisterBeacon(t)}),[]),n.useLayoutEffect(()=>{if(!r.current){s.reportBeaconPoint(t,null);return}const a=y(r.current,e,o);s.reportBeaconPoint(t,a)}),r},x=({id:t})=>{const e=n.useContext(u),[o,s]=n.useState(null);return n.useLayoutEffect(()=>(e.subscribe(t,s),()=>{e.unsubscribe(t,s)}),[]),o};export{d as C,m as a,x as u};
